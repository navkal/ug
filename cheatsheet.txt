Access to AWS:

ssh -i ~/aws/ayee.pem ubuntu@ec2-52-45-85-16.compute-1.amazonaws.com

If PuTTy access fails, log into AWS console, and go to:
. EC2
. Security Groups
. navkal-access (row in table)
. Inbound
. Edit
. Add/remove SSH entries as needed
. In dropdown, select "my IP"


Update code:

cd /opt/nav/ea/
sudo git pull origin master

cd /opt/nav/common/
sudo git pull origin master

cd /opt/nav/nn/
sudo git pull origin master

cd /opt/nav/oops/
sudo git pull origin master



If that fails due to dirty databases, use this:

cd /opt/nav
sudo rm -rf oops
sudo git clone https://github.com/navkal/oops.git


Make database read-write:

sudo chown www-data:www-data /opt/nav/oops/database/*
sudo chown www-data:www-data /opt/nav/oops/database/*/database.sqlite
sudo chown www-data:www-data /opt/nav/oops/database/*/*/images
sudo chown www-data:www-data /opt/nav/oops/database/*/*/images/*

sudo chown www-data:www-data /opt/nav/ps/database/*
sudo chown www-data:www-data /opt/nav/ps/database/*/database.sqlite
sudo chown www-data:www-data /opt/nav/ps/database/*/*/images
sudo chown www-data:www-data /opt/nav/ps/database/*/*/images/*



Restart apache:

sudo service apache2 restart


Cleanup:

ls /tmp
ls /var/www/ea/mda/archive/

sudo rm /tmp/mda*_*.*

sudo rm /var/www/ea/mda/archive/*.zip
sudo rm /var/www/ea/mda/archive/nonicknames.csv


Copy archive files:

scp -i ~/aws/ayee.pem ubuntu@ec2-52-45-85-16.compute-1.amazonaws.com:/var/www/ea/mda/archive/*.zip ~/aws/archive/

