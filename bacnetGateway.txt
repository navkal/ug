- To update BACnet Gateway and BACnet Gateway Test (bgt, bgt_) on Linux:

cd /opt/nav
sudo rm -rf bg

sudo git clone https://github.com/navkal/bg.git
sudo chown www-data:www-data bg

cd /opt/nav/bgt
sudo git pull origin master

cd /opt/nav
sudo rm -rf bgt_
sudo cp -r bgt bgt_
sudo cp -r bgt_ln bgt_
cd bgt_


sudo vi navbar.csv
[add/remove comments]


--> NOTES on Cache Loader! -->
--> NOTES on Cache Loader! -->
--> NOTES on Cache Loader! -->

- To edit cron file:
sudo crontab -e

- To allow www-data to use 'sudo' without password, add line to end of sudoers file
sudo visudo
www-data        ALL=(ALL) NOPASSWD: ALL



- If 'git pull' operation updates load_cache.sh or load_cache.py, it PROBABLY will disrupt the cron job.

  . Kill it:
ps -elf | grep load_cache
kill <third PID in the last>

  . Delete the log
cd /opt/nav/bgt_db
ll
sudo rm <load_cache_log>

<-- NOTES on Cache Loader! <--
<-- NOTES on Cache Loader! <--
<-- NOTES on Cache Loader! <--


- To generate a new database from the current history file:

cd /opt/nav/bgt/baselines
sudo su
/home/ea/anaconda3/bin/python ./save_history.py -b baselines.csv -h history.csv -u kWh -r


- To update the database from history file (for example) /home/baba.csv:

cd /opt/nav/bgt/baselines
sudo su
/home/ea/anaconda3/bin/python ./save_history.py -b baselines.csv -h /home/baba.csv -u kWh



- To update P&F exclusive links on About page:

sudo rm -rf /opt/nav/bgt_/bgt_ln
sudo cp -r /opt/nav/bgt_ln /opt/nav/bgt_



Test:

cd /opt/nav/bg

python br.py -a "10.12.0.250" -t analogInput -i 3006238 -p presentValue

python ReadProperty.py --ini ReadProperty.ini
read 10.12.0.250 analogInput 3006238 presentValue
exit




